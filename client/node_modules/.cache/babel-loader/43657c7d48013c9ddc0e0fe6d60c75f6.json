{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from 'firebase';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nvar config = {\n  apiKey: \"AIzaSyCdYSG_MEs3IdsB0fIfgf2MLZBJ2fJNfgk\",\n  authDomain: \"like-db.firebaseapp.com\",\n  databaseURL: \"https://like-db.firebaseio.com\",\n  projectId: \"like-db\",\n  storageBucket: \"like-db.appspot.com\",\n  messagingSenderId: \"279941861445\",\n  appId: \"1:279941861445:web:2e165a833ea580d059532c\",\n  measurementId: \"G-6C2DSF7LQE\"\n}; //to save user data in firebase database\n\nexport var createUserProfileDocument = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth, additionalData) {\n    var userRef, snapShot, displayName, email, createdAt;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (userAuth) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            userRef = firestore.doc(\"users/\".concat(userAuth.uid));\n            _context.next = 5;\n            return userRef.get();\n\n          case 5:\n            snapShot = _context.sent;\n\n            if (snapShot.exists) {\n              _context.next = 17;\n              break;\n            }\n\n            displayName = userAuth.displayName, email = userAuth.email;\n            createdAt = new Date();\n            _context.prev = 9;\n            _context.next = 12;\n            return userRef.set(_objectSpread({\n              displayName: displayName,\n              email: email,\n              createdAt: createdAt\n            }, additionalData));\n\n          case 12:\n            _context.next = 17;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](9);\n            console.log(\"error creating user\", _context.t0.message);\n\n          case 17:\n            return _context.abrupt(\"return\", userRef);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[9, 14]]);\n  }));\n\n  return function createUserProfileDocument(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nfirebase.initializeApp(config);\nexport var auth = firebase.auth();\nexport var firestore = firebase.firestore();\nvar provider = new firebase.auth.GoogleAuthProvider();\nprovider.setCustomParameters({\n  prompt: 'select_account'\n});\nexport var signInWithGoogle = function signInWithGoogle() {\n  return auth.signInWithPopup(provider);\n};\nexport default firebase;","map":{"version":3,"sources":["D:/monsters-rolodex/ECOMMERCE-AMAZON-LIKE-WEBSITE/src/firebase/firebase.util.js"],"names":["firebase","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","createUserProfileDocument","userAuth","additionalData","userRef","firestore","doc","uid","get","snapShot","exists","displayName","email","createdAt","Date","set","console","log","message","initializeApp","auth","provider","GoogleAuthProvider","setCustomParameters","prompt","signInWithGoogle","signInWithPopup"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,UAArB;AACA,OAAO,oBAAP;AACA,OAAO,eAAP;AAEA,IAAMC,MAAM,GAAC;AACLC,EAAAA,MAAM,EAAE,yCADH;AAELC,EAAAA,UAAU,EAAE,yBAFP;AAGLC,EAAAA,WAAW,EAAE,gCAHR;AAILC,EAAAA,SAAS,EAAE,SAJN;AAKLC,EAAAA,aAAa,EAAE,qBALV;AAMLC,EAAAA,iBAAiB,EAAE,cANd;AAOLC,EAAAA,KAAK,EAAE,2CAPF;AAQLC,EAAAA,aAAa,EAAE;AARV,CAAb,C,CAUA;;AACA,OAAO,IAAMC,yBAAyB;AAAA,sEAAC,iBAAMC,QAAN,EAAeC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAC/BD,QAD+B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAE7BE,YAAAA,OAF6B,GAErBC,SAAS,CAACC,GAAV,iBAAuBJ,QAAQ,CAACK,GAAhC,EAFqB;AAAA;AAAA,mBAGdH,OAAO,CAACI,GAAR,EAHc;;AAAA;AAG7BC,YAAAA,QAH6B;;AAAA,gBAI/BA,QAAQ,CAACC,MAJsB;AAAA;AAAA;AAAA;;AAKxBC,YAAAA,WALwB,GAKLT,QALK,CAKxBS,WALwB,EAKZC,KALY,GAKLV,QALK,CAKZU,KALY;AAMzBC,YAAAA,SANyB,GAMf,IAAIC,IAAJ,EANe;AAAA;AAAA;AAAA,mBAQ1BV,OAAO,CAACW,GAAR;AACDJ,cAAAA,WAAW,EAAXA,WADC;AAEDC,cAAAA,KAAK,EAALA,KAFC;AAGDC,cAAAA,SAAS,EAATA;AAHC,eAIEV,cAJF,EAR0B;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAe3Ba,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAkC,YAAIC,OAAtC;;AAf2B;AAAA,6CAkB5Bd,OAlB4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA,kBAAzBH,yBAAyB;AAAA;AAAA;AAAA,GAA/B;AAsBPV,QAAQ,CAAC4B,aAAT,CAAuB3B,MAAvB;AACA,OAAO,IAAM4B,IAAI,GAAC7B,QAAQ,CAAC6B,IAAT,EAAX;AACP,OAAO,IAAMf,SAAS,GAACd,QAAQ,CAACc,SAAT,EAAhB;AACP,IAAMgB,QAAQ,GAAC,IAAI9B,QAAQ,CAAC6B,IAAT,CAAcE,kBAAlB,EAAf;AACAD,QAAQ,CAACE,mBAAT,CAA6B;AAACC,EAAAA,MAAM,EAAC;AAAR,CAA7B;AACA,OAAO,IAAMC,gBAAgB,GAAC,SAAjBA,gBAAiB;AAAA,SAAIL,IAAI,CAACM,eAAL,CAAqBL,QAArB,CAAJ;AAAA,CAAvB;AACP,eAAe9B,QAAf","sourcesContent":["import firebase from 'firebase';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n \r\nconst config={\r\n        apiKey: \"AIzaSyCdYSG_MEs3IdsB0fIfgf2MLZBJ2fJNfgk\",\r\n        authDomain: \"like-db.firebaseapp.com\",\r\n        databaseURL: \"https://like-db.firebaseio.com\",\r\n        projectId: \"like-db\",\r\n        storageBucket: \"like-db.appspot.com\",\r\n        messagingSenderId: \"279941861445\",\r\n        appId: \"1:279941861445:web:2e165a833ea580d059532c\",\r\n        measurementId: \"G-6C2DSF7LQE\"\r\n}\r\n//to save user data in firebase database\r\nexport const createUserProfileDocument=async(userAuth,additionalData)=>{\r\n    if(!userAuth) return;\r\n    const userRef=firestore.doc(`users/${userAuth.uid}`);\r\n    const snapShot=await userRef.get();\r\n    if(!snapShot.exists){\r\n        const {displayName,email}=userAuth;\r\n        const createdAt=new Date();\r\n        try{\r\n       await userRef.set({\r\n            displayName,\r\n            email,\r\n            createdAt,\r\n            ...additionalData\r\n        })}\r\n        catch(err){\r\n            console.log(\"error creating user\",err.message);\r\n        }\r\n    }\r\n    return userRef;\r\n    \r\n\r\n}\r\nfirebase.initializeApp(config);\r\nexport const auth=firebase.auth();\r\nexport const firestore=firebase.firestore();\r\nconst provider=new firebase.auth.GoogleAuthProvider();\r\nprovider.setCustomParameters({prompt:'select_account'});\r\nexport const signInWithGoogle=()=>auth.signInWithPopup(provider);\r\nexport default firebase;\r\n"]},"metadata":{},"sourceType":"module"}